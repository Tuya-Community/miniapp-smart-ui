<wxs src="../wxs/utils.wxs" module="utils" />
<wxs src="./index.wxs" module="computed" />

<import src="./popup.wxml" />

<block wx:if="{{ isShowed }}">
  <cover-view wx:if="{{ fullCoverView && isShowed && show }}" class="smart-popup-full-cover-view">
    <smart-overlay
      wx:if="{{ overlay }}"
      show="{{ show }}"
      z-index="{{ zIndex }}"
      custom-style="{{ overlayStyle }}"
      duration="{{ duration }}"
      bind:click="onClickOverlay"
      lock-scroll="{{ lockScroll }}"
      root-portal="{{ rootPortal }}"
    />

    <root-portal wx:if="{{ rootPortal }}">
      <include src="./popup.wxml" />
    </root-portal>

    <include wx:else src="./popup.wxml" />
  </cover-view>
  <block wx:else>
    <smart-overlay
      wx:if="{{ overlay }}"
      show="{{ show }}"
      z-index="{{ zIndex }}"
      custom-style="{{ overlayStyle }}"
      duration="{{ duration }}"
      bind:click="onClickOverlay"
      lock-scroll="{{ lockScroll }}"
      root-portal="{{ rootPortal }}"
    />

    <root-portal wx:if="{{ rootPortal }}">
      <include src="./popup.wxml" />
    </root-portal>

    <include wx:else src="./popup.wxml" />
  </block>
</block>
